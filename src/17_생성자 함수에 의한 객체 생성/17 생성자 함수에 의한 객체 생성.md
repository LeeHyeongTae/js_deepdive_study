# 17. 생성자 함수에 의한 객체 생성

> 생성자 함수란, new 연산자와 함께 호출하여 인스턴스를 생성하는 함수.  
> 자바스크립트는 Object, String, Number, Boolean, Function, Array, Date, RegExp, Promise  
> 등의 빌트인 생성자 함수를 제공.

## 17-1. Object 생성자 함수

```javascript
// 빈 객체의 생성

const person = new Object();

// 프로퍼티 추가
person.name = 'Lee';
person.sayHello = function () {
  console.log(this.name);
};

console.log(person);
```

> 반드시 생성자 함수를 사용할 필요는 없음.  
> 객체 리터럴 방법을 사용하는 것이 편리.  
> 객체리터럴 방식은 하나의 객체만 생성한다. 따라서 여러 개 생성해야 하는 경우 비효율적.

## 17-2. 생성자 함수

### 17-2-1. 객체 리터럴에 의한 객체 생성 방식의 문제점

> 객체 리터럴 방식의 경우 생성 시마다 매번 같은 프로퍼티와 메서드를 기술.

### 17-2-2. 생성자 함수에 의한 객체 생성 방식의 장점

> 객체를 생성하기 위한 클래스 처럼 생성자 함수를 사용, 동일한 구조의 객체를 여러 개 생성.  
> 생성자 함수를 정의하고 new 연산자와 함께 호출하면 해당 함수는 생성자 함수로 동작.  
> new 연산자가 없다면 일반 함수로 동작한다.

### 17-2-3. 생성자 함수의 인스턴스 생성 과정

- 생성자 함수의 역할
  - 인스턴스를 생성
  - 생성된 인스턴스를 초기화(인스턴스 프로퍼티 추가 및 초기값 할당)

```javascript
// 생성자 함수
function Circle(radius) {
  // 인스턴스 초기화
  // 1. 암묵적으로 인스턴스가 생성되고 this에 바인딩.
  
  // 2. this에 바인딩된 인스턴스를 초기화
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
  
  // * 명시적으로 객체를 반환하면 암묵적인 this 반환이 무시된다.
  return {};
  
  // * 명시적으로 원시값을 반환하면 원시 값 반환은 무시되고 암묵적으로 this가 반환.
  return 100;
  
  // 이처럼 생성자 함수 내부에서 명시적으로 this가 아닌 값을 반환하는 것은 생성자 함수의 기본 동작을 훼손.
  
  // 3. 완성된 인스턴스가 바인딩된 this가 암묵적으로 반환.
}

// 인스턴스 생성, Circle 생성자 함수는 암묵적으로 this를 반환한다.
const circle1 = new Circle(5); // 반지름이 5인 Circle 객체 생성
```

### 17-2-4. 내부 메서드 [[Call]]과 [[Construct]]

- 함수선언문 또는 함수 표현식으로 정의한 함수는 일반적인 함수로 호출 o, 생성자 함수로 호출 o
- 함수는 객체이므로 일반 객체와 동일하게 동작.
- 내부 슬롯과 내부 메서드를 가짐.

```javascript
function foo() {}

foo.prop = 10;

foo.method = function () { console.log(prop); };

foo.method(); // 10
```

- 함수는 객체이지만 일반 객체와는 다름.
- 일반 객체는 호출할 수 없음, 함수는 호출 가능
- 함수로 동작하기
